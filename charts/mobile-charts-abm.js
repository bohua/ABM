define([
    "/extensions/ABM/js/chart-helper.js"
], function (helper) {
    var mapformatter;
    var resizeChart;

    return {
        getData: function (data, fn) {
            mapformatter = fn.mapformatter;
            resizeChart = fn.resizeChart;
            nsw(data);
            sydney(data);
            ToggleLoading(false);
        }
    };

    function nsw(data) {
        var lhd = [];
        var percentAllStreams = helper.Qlik2Lhd(data);

        // var month = refreshTime.substring(5, 7);
        // var year = refreshTime.substring(2, 4);
        // var day = refreshTime.substring(8, 10);
        // var hour = refreshTime.substring(11, 13);
        // var minute = refreshTime.substring(14, 16);
        // var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        // if (hour >= 12) {
        //     var time = hour - 12 + ":" + minute + " PM";
        // } else if (hour < 12) {
        //     var time = hour + ":" + minute + " AM";
        // }
        // var refresh = "Refreshed: " + day + " " + months[month - 1] + " " + year + " " + time;
        // $('#abm-refresh').html(refresh);


        for (var i = 0; i < percentAllStreams.length; i++) {
            lhd = percentAllStreams[i]["LHD"];
            if (lhd === "FW") {
                var fwValue = percentAllStreams[i]["Value"];
                var fwName = percentAllStreams[i]["LHD"];
            }
            if (lhd === "HNE") {
                var hneValue = percentAllStreams[i]["Value"];
                var hneName = percentAllStreams[i]["LHD"];
            }
            if (lhd === "MUR") {
                var mValue = percentAllStreams[i]["Value"];
                var mName = percentAllStreams[i]["LHD"];
            }
            if (lhd === "MNC") {
                var mncValue = percentAllStreams[i]["Value"];
                var mncName = percentAllStreams[i]["LHD"];
            }
            if (lhd === "NNSW") {
                var nnswValue = percentAllStreams[i]["Value"];
                var nnswName = percentAllStreams[i]["LHD"];
            }
            if (lhd === "SNSW") {
                var snswValue = percentAllStreams[i]["Value"];
                var snswName = percentAllStreams[i]["LHD"];
            }
            if (lhd === "WNSW") {
                var wnswValue = percentAllStreams[i]["Value"];
                var wnswName = percentAllStreams[i]["LHD"];
            }
            if (lhd === "IS") {
                var isValue = percentAllStreams[i]["Value"];
                var isName = percentAllStreams[i]["LHD"];
            }
            if (lhd === "SVHN") {
                var svhnValue = percentAllStreams[i]["Value"];
                var svhnName = percentAllStreams[i]["LHD"];
            }
            if (lhd === "SCHN") {
                var schnValue = percentAllStreams[i]["Value"];
                var schnName = percentAllStreams[i]["LHD"];
            }
        }



        var ish = {
            "name": isName,
            "value": isValue,
            color: '#2272a3',
            "path": "M803,-432C803,-432,804,-418,797,-412L786,-393L779,-373L773,-362L776,-352L767,-344C769,-341,767,-334,767,-334C766,-333,757,-334,757,-334L757,-322L750,-314L750,-306L745,-290L734,-279L717,-279C717,-279,705,-288,705,-299L705,-319C705,-319,728,-315,719,-325L709,-355L724,-372C738,-370,748,-382,754,-382L766,-400L790,-424L803,-432"
        }

        var fw = {
            "name": fwName,
            "value": fwValue,
            color: '#78b8e2',
            "path": "M0,-440L0,-912L267,-912L267,-905L267,-896L274,-890L274,-879L266,-866L257,-855L247,-845L246,-830L240,-822C240,-822,237,-815,240,-815L244,-815L250,-806L258,-806L255,-794L261,-794L253,-783L285,-740L285,-732L273,-732L266,-715L258,-715L251,-707L240,-707L240,-694L258,-676L265,-667L273,-669C273,-669,276,-665,277,-661C279,-656,260,-644,260,-644L263,-638L252,-629L246,-638L241,-629L250,-621L258,-621L267,-614L262,-609L269,-596L275,-596L285,-587L294,-587L294,-582L302,-580L309,-579L316,-581L316,-574L316,-562L327,-554L327,-544L327,-532L319,-531L321,-520L313,-520L303,-526L303,-517L298,-511L288,-511L283,-504L269,-504L273,-493L276,-485L276,-473L283,-464L282,-455L284,-448L282,-440L290,-440L298,-440L299,-433L289,-433C289,-433,289,-422,283,-421C277,-420,270,-415,270,-415L261,-415L253,-415L245,-415L238,-409L230,-405L218,-400C218,-400,222,-392,216,-391L210,-390L209,-376L203,-369L200,-352L192,-352L187,-363L175,-369C175,-369,166,-375,164,-375L151,-375L143,-385L137,-381L134,-369L124,-369L118,-381L111,-392L111,-405L102,-412L97,-425L85,-426L71,-427C71,-427,62,-433,57,-431C53,-430,46,-422,46,-422L35,-423L30,-429L18,-434C18,-434,0,-434,0,-440"
        }
        var wnsw = {
            "name": wnswName,
            "value": wnswValue,
            color: '#2272a3',
            "path": "M267,-912L627,-912L618,-903L614,-896L614,-882L609,-875L610,-866C610,-866,617,-868,620,-866C624,-863,627,-866,627,-866L627,-850L638,-845L638,-832L638,-819L638,-814L628,-799L631,-783C631,-783,622,-788,622,-783L622,-767L620,-758L629,-758C629,-758,635,-764,638,-761C640,-757,638,-750,638,-750L649,-744L649,-732L664,-738L664,-732L675,-732C675,-732,677,-729,682,-732C686,-735,692,-731,692,-731L699,-731L699,-720L705,-715L705,-706L695,-699L698,-694L699,-687L705,-687L713,-683L705,-677L707,-671L706,-664C706,-664,697,-658,701,-657L706,-656L717,-656L717,-644L705,-632L704,-626L697,-618L706,-618L712,-614L717,-609L717,-596L726,-596L734,-596L734,-587L734,-575L738,-569L738,-562L738,-550L738,-543L720,-543L712,-543C712,-543,707,-537,707,-533L708,-520L693,-526L695,-514L704,-506L706,-495L702,-485L707,-473C707,-473,713,-474,717,-473C722,-472,716,-464,716,-464L726,-464L729,-455L729,-435C729,-435,728,-433,720,-428L708,-428L706,-421C706,-421,705,-419,694,-421C684,-423,677,-434,677,-434L662,-436L650,-438C644,-438,648,-444,641,-447L632,-440L622,-443L613,-438L614,-430L599,-431L594,-436L589,-427L577,-428L568,-430C568,-430,564,-442,561,-437C558,-433,561,-425,553,-425L539,-420C536,-425,534,-434,534,-434L529,-445L517,-445L519,-455C519,-455,523,-450,515,-464C507,-478,509,-487,495,-480L479,-486L471,-496L465,-507L457,-509L443,-514L435,-518L429,-513L420,-513L407,-508C407,-508,404,-514,401,-518C399,-523,390,-526,390,-526L373,-526L369,-538L369,-554C369,-554,361,-553,355,-554C349,-554,342,-554,342,-554L345,-569C340,-568,334,-562,334,-562L334,-543L327,-554L316,-562L291,-574C291,-574,272,-576,272,-582L252,-603L238,-621L243,-644L252,-644L265,-653L258,-665L233,-694L239,-715L248,-715L255,-726L261,-720L266,-737L275,-744L247,-775C247,-775,244,-789,244,-793L233,-806L233,-826C238,-833,241,-850,241,-850L250,-865C253,-866,263,-879,263,-879L261,-890L257,-912L267,-912z"
        }

        var hne = {
            "name": hneName,
            "value": hneValue,
            color: '#4a91c6',
            "path": "M633,-914C633,-914,633,-920,641,-926C649,-932,663,-940,663,-940L675,-953C686,-954,693,-947,693,-947L707,-947C712,-947,721,-953,724,-953C728,-953,738,-953,738,-953L746,-945L756,-942L766,-943C766,-943,772,-949,779,-943C786,-938,789,-933,789,-933L796,-927C796,-927,802,-927,808,-919C814,-911,815,-906,815,-899L829,-899L834,-914C843,-921,846,-928,852,-923C858,-919,865,-921,870,-923C876,-926,878,-943,878,-943L869,-959L878,-959L885,-965L895,-965L900,-976L910,-982L904,-968L897,-959C897,-959,892,-951,896,-948L910,-938L910,-929L915,-923L915,-914L907,-912L905,-905L906,-899L905,-894L896,-888C896,-888,895,-881,899,-881C904,-881,905,-870,905,-870L905,-865L900,-859L893,-852L893,-846C893,-846,885,-844,885,-838C885,-833,885,-833,892,-832C899,-831,896,-824,896,-824L897,-815L897,-807L898,-795L898,-783L906,-778L902,-772C902,-772,897,-764,893,-763C890,-762,900,-757,900,-751L900,-745L893,-735L892,-726L899,-716L898,-703L891,-703L884,-707L884,-693L877,-689L876,-681L881,-672L892,-672C897,-672,895,-672,899,-665C904,-658,904,-658,910,-659C915,-660,925,-658,925,-658L932,-650L925,-641C925,-641,919,-640,917,-632C914,-624,911,-617,911,-617L914,-606L913,-596L912,-589L902,-581L891,-573L887,-562L878,-562L871,-567L862,-562L869,-557L883,-557L875,-550L863,-550L855,-543L849,-536L845,-527L840,-536L834,-527C834,-527,836,-521,830,-518C824,-515,822,-527,818,-527C815,-528,810,-518,810,-518L800,-527C801,-532,793,-527,793,-527L787,-518L782,-527L775,-536C775,-536,774,-522,770,-527C765,-532,760,-527,760,-527L749,-527L743,-536L731,-550L730,-562L727,-579L727,-589L712,-589L710,-604L698,-611C698,-611,683,-612,686,-617L698,-632L708,-646L693,-650L693,-665L697,-678L684,-701L694,-707L691,-722L670,-727L656,-727L643,-726L633,-741L624,-750L612,-757L616,-795L624,-807L629,-829L628,-838L621,-846L619,-859L612,-860L602,-865L602,-890L610,-905L619,-912L633,-914z"
        }

        var mnc = {
            "name": mncName,
            "value": mncValue,
            color: '#79b9e3',
            "path": "M932,-650C932,-650,937,-655,941,-665C941,-665,944,-678,946,-681C947,-684,946,-693,946,-693L951,-716C951,-716,957,-727,957,-730L949,-750C950,-757,954,-768,957,-778L968,-807C968,-811,971,-824,971,-824L963,-831C957,-829,953,-813,942,-807C932,-802,925,-795,925,-795L905,-801L902,-772L885,-763C885,-763,892,-754,892,-750C892,-745,884,-735,885,-728C887,-721,899,-716,899,-716L891,-703L885,-716L875,-701L868,-689C868,-689,866,-674,875,-670C884,-667,892,-665,892,-665L899,-659C906,-653,919,-659,919,-659L932,-650z"
        }

        var m = {
            "name": mName,
            "value": mValue,
            color: '#4a91c6',
            "path": "M562,-205C562,-205,559,-215,561,-221C563,-227,559,-237,553,-246C547,-255,529,-253,524,-253C519,-253,512,-255,508,-252C503,-249,493,-249,484,-249L471,-245L451,-250C445,-253,435,-253,430,-249C426,-244,417,-247,408,-247L387,-254L372,-259C367,-261,367,-272,357,-267C348,-262,341,-264,336,-265C332,-266,324,-267,316,-266L314,-258L314,-244C310,-242,306,-239,301,-238L274,-257C269,-261,266,-272,261,-274C257,-276,248,-287,238,-293C228,-298,225,-304,215,-308L207,-325C207,-328,200,-325,195,-325C191,-325,188,-337,185,-343L189,-357L195,-368L202,-381L204,-394L210,-390L215,-409L224,-409L246,-425L261,-425L276,-425L272,-437L272,-456L269,-480L262,-504L270,-518L282,-518L291,-527L305,-536L314,-543L327,-573L361,-579L361,-568L373,-562L379,-550L378,-536L390,-536L402,-527L411,-518L420,-518L439,-527L449,-527L460,-518L475,-504L484,-489L492,-487L510,-491L519,-480L526,-463L532,-453L540,-441L543,-432L561,-444L575,-440L583,-438L592,-445L602,-442L610,-449L625,-451L640,-452L649,-451L633,-432L636,-419L641,-404L636,-392L633,-377L624,-382L613,-384L602,-386L602,-374L602,-361L594,-352L602,-341L596,-330L602,-321L610,-321L616,-312C616,-312,618,-301,617,-294L618,-277L602,-280L594,-269C592,-265,604,-249,602,-243C599,-237,590,-239,590,-239L587,-225L574,-210L577,-193L569,-180L566,-199L562,-205z"
        }

        var snsw = {
            "name": snswName,
            "value": snswValue,
            color: '#2c538d',
            "path": "M706,-106L661,-131L574,-173L567,-192L571,-199L571,-217L579,-227L589,-245L593,-250L589,-272L602,-286L611,-286L622,-276C622,-276,631,-268,630,-263L637,-258L644,-269L640,-286L649,-286C649,-286,644,-293,645,-299L654,-312L668,-312C668,-312,660,-318,657,-320L649,-328C648,-331,644,-333,644,-333L629,-321L619,-316L617,-301L616,-312L605,-317L591,-328L598,-345L589,-352L602,-365C602,-365,595,-394,602,-394L617,-394L630,-384L637,-401L631,-419L627,-432L649,-451L649,-442C649,-442,661,-442,664,-441L678,-438L696,-428L711,-432C717,-434,720,-428,720,-428L720,-419L714,-414L703,-413L708,-407L713,-404C713,-404,722,-407,724,-404L717,-395L715,-386L724,-379L724,-372L729,-369L738,-370L745,-369L733,-364L728,-361L719,-365L716,-360L718,-352C718,-352,717,-348,717,-343L726,-334L730,-326L724,-317L714,-313C714,-313,717,-303,715,-300L713,-291L720,-288C720,-288,727,-288,729,-291L734,-287L738,-279L726,-279C726,-279,735,-275,732,-270L724,-255L724,-238C724,-238,726,-227,723,-217L718,-195L711,-180L705,-166C705,-166,709,-160,709,-156L702,-149L704,-143L713,-136L710,-126L706,-106"
        }

        var metro = {
            "name": mName,
            color: '#abcee6',
            dataLabels: {
                enabled: false
            },
            "path": "M834,-527C834,-527,848,-529,843,-518C839,-506,829,-511,829,-506L823,-484L816,-463C816,-452,813,-447,811,-444L803,-444L803,-432L799,-424L790,-424L781,-414L771,-406L767,-389C767,-389,772,-383,767,-379C761,-375,757,-374,745,-369L716,-374L709,-395L695,-412L701,-420C701,-420,707,-410,710,-419C714,-428,721,-436,722,-442L721,-459L710,-459C710,-459,718,-469,710,-469L695,-493L688,-513L692,-536L698,-535C698,-535,703,-553,711,-550L745,-550L752,-536L759,-536L767,-539C767,-539,773,-545,777,-542L787,-527L800,-536C803,-533,808,-527,808,-527L820,-536C823,-532,824,-520,824,-520L834,-527z"
        }

        var nnsw = {
            "name": nnswName,
            "value": nnswValue,
            color: '#abcee6',
            "path": "M932,-972L944,-972L955,-972C955,-972,961,-979,971,-982C981,-984,986,-1002,993,-995C1000,-987,993,-965,993,-965L996,-951L996,-938L996,-921L988,-914L986,-902L984,-890L978,-890L976,-855L971,-824L964,-824L957,-816L953,-807L942,-807L932,-802L925,-795L911,-795L906,-778L898,-783L889,-824L875,-838L882,-852C882,-852,895,-863,897,-867C899,-870,885,-883,885,-887C885,-891,895,-898,895,-898L900,-919C904,-920,910,-929,910,-929L898,-936C898,-936,878,-940,887,-953C895,-965,910,-982,910,-982L917,-973C917,-973,918,-991,925,-982L932,-972z"
        }
        var green = [];
        var yellow = [];
        var red = [];

        var dataColor = [ish, fw, wnsw, hne, mnc, m, snsw, nnsw];
        for (var i = 0; i < dataColor.length; i++) {

            if (dataColor[i]["value"] > 2 || dataColor[i]["value"] < -2) {
                red.push(dataColor[i]);
                dataColor[i]["value"] = dataColor[i]["value"] + "%";
            }
            if (-2 <= dataColor[i]["value"] && dataColor[i]["value"] <= -1 || 1 <= dataColor[i]["value"] && dataColor[i]["value"] <= 2) {
                yellow.push(dataColor[i]);
                dataColor[i]["value"] = dataColor[i]["value"] + "%";
            }
            if (dataColor[i]["value"] < 1 && dataColor[i]["value"] > -1) {
                green.push(dataColor[i]);
                dataColor[i]["value"] = dataColor[i]["value"] + "%";
            }
        }

        yellow.push(metro);

        function networks(data, id) {
            if (data > 2 || data < -2) {
                $(id).attr("src", 'images/crush.png');
                //$(id).attr("src", 'images/red-circ.png');
                $(id).parent().attr("class", "red1");
            }
            else if (-2 <= data && data <= -1 || 1 <= data && data <= 2) {
                $(id).attr("src", 'images/right-down.png');
                //$(id).attr("src", 'images/yellow-circ.png');
                $(id).parent().attr("class", "yellow1");
            }
            else if (data < 1 && data > -1) {
                $(id).attr("src", 'images/check.png');
                $(id).parent().attr("class", "green1");
            }
        }

        networks(svhnValue, "#svhns");
        networks(schnValue, "#schns");

        var title = "SVHN<br>All Streams: ";
        var title2 = "SCHN<br>All Streams: ";

        $("#svhns").hover(function () {
            Highcharts.each(Highcharts.charts, function (c) {
                c.tooltip.hide();
            });
            $("#svhns-panel").find(".map-hover").remove();
            $("#svhns-panel").append("<div class='map-hover svhnshover'>" + title + svhnValue + "%" + "</div>");
        })

        $("#svhns").mouseleave(function () {
            $("#svhns-panel").find(".map-hover").remove();

            //alert(svhnValue);
        })

        $("#schns").hover(function () {
            Highcharts.each(Highcharts.charts, function (c) {
                c.tooltip.hide();
            });
            $("#schns-panel").find(".map-hover").remove();
            $("#schns-panel").append("<div class='map-hover schnshover'>" + title2 + schnValue + "%" + "</div>");
        })

        $("#schns").mouseleave(function () {
            $("#schns-panel").find(".map-hover").remove();
        })


        var chartspacing_right = helper.isPortrait() ? 25 : 0;
        var chartspacing_left = helper.isPortrait() ? 10 : 0;

        // Initiate the chart
        $('#container4').highcharts('Map', {
            chart: {
                backgroundColor: '#e5e5e5',
                spacingBottom: 0,
                spacingTop: 0,
                spacingLeft: chartspacing_left,
                spacingRight: chartspacing_right
            },

            title: {
                text: '',
            },
            legend: {
                enabled: false
            },
            tooltip: {
                enabled: true,
                hideDelay:0,
                borderWidth: 0,
                borderRadius: 10,
                shadow: false,
                useHTML: true,
                backgroundColor: 'transparent',
                style: {
                    padding: 0
                },
                formatter: function () {
                    if (this.series.name === 'mapbg' || this.point.value === undefined) {
                        return false;
                    } else {
                        return '<span style="padding:10px; text-align:center; display:block; background:#34474f; border-radius:0px; color: #fff">' +
                            /*'<b>Series name: ' +*/
                            //this.series.name + '</b><br>' +
                            /*'Point name: ' +*/
                            this.point.name + '<br>' +
                            'All Streams: ' + this.point.value +
                            '</span>';
                    }

                },
            },

            credits: {
                enabled: false
            },

            mapNavigation: {
                enabled: false,
                enableMouseWheelZoom: false
            },
            buttonOptions: {
                align: "left",
                enabled: true
            },
            series: [{
                "type": "map",
                name: 'mapbg',
                color: '#ccc',
                borderColor: '#e5e5e5',
                borderWidth: '2px',
                dataLabels: {
                    enabled: false,
                    useHTML: false,
                },
                "data": [{

                    "path": "M633,-914C633,-914,633,-920,641,-926C649,-932,663,-940,663,-940L675,-953C686,-954,693,-947,693,-947L707,-947C712,-947,721,-953,724,-953C728,-953,738,-953,738,-953L746,-945L756,-942L766,-943C766,-943,772,-949,779,-943C786,-938,789,-933,789,-933L796,-927C796,-927,802,-927,808,-919C814,-911,815,-906,815,-899L829,-899L834,-914C843,-921,846,-928,852,-923C858,-919,865,-921,870,-923C876,-926,878,-943,878,-943L869,-959L878,-959L885,-965L895,-965L900,-976L910,-982L904,-968L897,-959C897,-959,892,-951,896,-948L910,-938L910,-929L915,-923L915,-914L907,-912L905,-905L906,-899L905,-894L896,-888C896,-888,895,-881,899,-881C904,-881,905,-870,905,-870L905,-865L900,-859L893,-852L893,-846C893,-846,885,-844,885,-838C885,-833,885,-833,892,-832C899,-831,896,-824,896,-824L897,-815L897,-807L898,-795L898,-783L906,-778L902,-772C902,-772,897,-764,893,-763C890,-762,900,-757,900,-751L900,-745L893,-735L892,-726L899,-716L898,-703L891,-703L884,-707L884,-693L877,-689L876,-681L881,-672L892,-672C897,-672,895,-672,899,-665C904,-658,904,-658,910,-659C915,-660,925,-658,925,-658L932,-650L925,-641C925,-641,919,-640,917,-632C914,-624,911,-617,911,-617L914,-606L913,-596L912,-589L902,-581L891,-573L887,-562L878,-562L871,-567L862,-562L869,-557L883,-557L875,-550L863,-550L855,-543L849,-536L845,-527L840,-536L834,-527C834,-527,836,-521,830,-518C824,-515,822,-527,818,-527C815,-528,810,-518,810,-518L800,-527C801,-532,793,-527,793,-527L787,-518L782,-527L775,-536C775,-536,774,-522,770,-527C765,-532,760,-527,760,-527L749,-527L743,-536L731,-550L730,-562L727,-579L727,-589L712,-589L710,-604L698,-611C698,-611,683,-612,686,-617L698,-632L708,-646L693,-650L693,-665L697,-678L684,-701L694,-707L691,-722L670,-727L656,-727L643,-726L633,-741L624,-750L612,-757L616,-795L624,-807L629,-829L628,-838L621,-846L619,-859L612,-860L602,-865L602,-890L610,-905L619,-912L633,-914z"
                }, {

                    "path": "M267,-912L627,-912L618,-903L614,-896L614,-882L609,-875L610,-866C610,-866,617,-868,620,-866C624,-863,627,-866,627,-866L627,-850L638,-845L638,-832L638,-819L638,-814L628,-799L631,-783C631,-783,622,-788,622,-783L622,-767L620,-758L629,-758C629,-758,635,-764,638,-761C640,-757,638,-750,638,-750L649,-744L649,-732L664,-738L664,-732L675,-732C675,-732,677,-729,682,-732C686,-735,692,-731,692,-731L699,-731L699,-720L705,-715L705,-706L695,-699L698,-694L699,-687L705,-687L713,-683L705,-677L707,-671L706,-664C706,-664,697,-658,701,-657L706,-656L717,-656L717,-644L705,-632L704,-626L697,-618L706,-618L712,-614L717,-609L717,-596L726,-596L734,-596L734,-587L734,-575L738,-569L738,-562L738,-550L738,-543L720,-543L712,-543C712,-543,707,-537,707,-533L708,-520L693,-526L695,-514L704,-506L706,-495L702,-485L707,-473C707,-473,713,-474,717,-473C722,-472,716,-464,716,-464L726,-464L729,-455L729,-435C729,-435,728,-433,720,-428L708,-428L706,-421C706,-421,705,-419,694,-421C684,-423,677,-434,677,-434L662,-436L650,-438C644,-438,648,-444,641,-447L632,-440L622,-443L613,-438L614,-430L599,-431L594,-436L589,-427L577,-428L568,-430C568,-430,564,-442,561,-437C558,-433,561,-425,553,-425L539,-420C536,-425,534,-434,534,-434L529,-445L517,-445L519,-455C519,-455,523,-450,515,-464C507,-478,509,-487,495,-480L479,-486L471,-496L465,-507L457,-509L443,-514L435,-518L429,-513L420,-513L407,-508C407,-508,404,-514,401,-518C399,-523,390,-526,390,-526L373,-526L369,-538L369,-554C369,-554,361,-553,355,-554C349,-554,342,-554,342,-554L345,-569C340,-568,334,-562,334,-562L334,-543L327,-554L316,-562L291,-574C291,-574,272,-576,272,-582L252,-603L238,-621L243,-644L252,-644L265,-653L258,-665L233,-694L239,-715L248,-715L255,-726L261,-720L266,-737L275,-744L247,-775C247,-775,244,-789,244,-793L233,-806L233,-826C238,-833,241,-850,241,-850L250,-865C253,-866,263,-879,263,-879L261,-890L257,-912L267,-912z"
                }, {

                    "path": "M932,-972L944,-972L955,-972C955,-972,961,-979,971,-982C981,-984,986,-1002,993,-995C1000,-987,993,-965,993,-965L996,-951L996,-938L996,-921L988,-914L986,-902L984,-890L978,-890L976,-855L971,-824L964,-824L957,-816L953,-807L942,-807L932,-802L925,-795L911,-795L906,-778L898,-783L889,-824L875,-838L882,-852C882,-852,895,-863,897,-867C899,-870,885,-883,885,-887C885,-891,895,-898,895,-898L900,-919C904,-920,910,-929,910,-929L898,-936C898,-936,878,-940,887,-953C895,-965,910,-982,910,-982L917,-973C917,-973,918,-991,925,-982L932,-972z"
                }, {

                    "path": "M932,-650C932,-650,937,-655,941,-665C941,-665,944,-678,946,-681C947,-684,946,-693,946,-693L951,-716C951,-716,957,-727,957,-730L949,-750C950,-757,954,-768,957,-778L968,-807C968,-811,971,-824,971,-824L963,-831C957,-829,953,-813,942,-807C932,-802,925,-795,925,-795L905,-801L902,-772L885,-763C885,-763,892,-754,892,-750C892,-745,884,-735,885,-728C887,-721,899,-716,899,-716L891,-703L885,-716L875,-701L868,-689C868,-689,866,-674,875,-670C884,-667,892,-665,892,-665L899,-659C906,-653,919,-659,919,-659L932,-650z"
                }, {

                    "path": "M562,-205C562,-205,559,-215,561,-221C563,-227,559,-237,553,-246C547,-255,529,-253,524,-253C519,-253,512,-255,508,-252C503,-249,493,-249,484,-249L471,-245L451,-250C445,-253,435,-253,430,-249C426,-244,417,-247,408,-247L387,-254L372,-259C367,-261,367,-272,357,-267C348,-262,341,-264,336,-265C332,-266,324,-267,316,-266L314,-258L314,-244C310,-242,306,-239,301,-238L274,-257C269,-261,266,-272,261,-274C257,-276,248,-287,238,-293C228,-298,225,-304,215,-308L207,-325C207,-328,200,-325,195,-325C191,-325,188,-337,185,-343L189,-357L195,-368L202,-381L204,-394L210,-390L215,-409L224,-409L246,-425L261,-425L276,-425L272,-437L272,-456L269,-480L262,-504L270,-518L282,-518L291,-527L305,-536L314,-543L327,-573L361,-579L361,-568L373,-562L379,-550L378,-536L390,-536L402,-527L411,-518L420,-518L439,-527L449,-527L460,-518L475,-504L484,-489L492,-487L510,-491L519,-480L526,-463L532,-453L540,-441L543,-432L561,-444L575,-440L583,-438L592,-445L602,-442L610,-449L625,-451L640,-452L649,-451L633,-432L636,-419L641,-404L636,-392L633,-377L624,-382L613,-384L602,-386L602,-374L602,-361L594,-352L602,-341L596,-330L602,-321L610,-321L616,-312C616,-312,618,-301,617,-294L618,-277L602,-280L594,-269C592,-265,604,-249,602,-243C599,-237,590,-239,590,-239L587,-225L574,-210L577,-193L569,-180L566,-199L562,-205z"
                }, {

                    "path": "M706,-106L661,-131L574,-173L567,-192L571,-199L571,-217L579,-227L589,-245L593,-250L589,-272L602,-286L611,-286L622,-276C622,-276,631,-268,630,-263L637,-258L644,-269L640,-286L649,-286C649,-286,644,-293,645,-299L654,-312L668,-312C668,-312,660,-318,657,-320L649,-328C648,-331,644,-333,644,-333L629,-321L619,-316L617,-301L616,-312L605,-317L591,-328L598,-345L589,-352L602,-365C602,-365,595,-394,602,-394L617,-394L630,-384L637,-401L631,-419L627,-432L649,-451L649,-442C649,-442,661,-442,664,-441L678,-438L696,-428L711,-432C717,-434,720,-428,720,-428L720,-419L714,-414L703,-413L708,-407L713,-404C713,-404,722,-407,724,-404L717,-395L715,-386L724,-379L724,-372L729,-369L738,-370L745,-369L733,-364L728,-361L719,-365L716,-360L718,-352C718,-352,717,-348,717,-343L726,-334L730,-326L724,-317L714,-313C714,-313,717,-303,715,-300L713,-291L720,-288C720,-288,727,-288,729,-291L734,-287L738,-279L726,-279C726,-279,735,-275,732,-270L724,-255L724,-238C724,-238,726,-227,723,-217L718,-195L711,-180L705,-166C705,-166,709,-160,709,-156L702,-149L704,-143L713,-136L710,-126L706,-106"
                }, {

                    "path": "M834,-527C834,-527,848,-529,843,-518C839,-506,829,-511,829,-506L823,-484L816,-463C816,-452,813,-447,811,-444L803,-444L803,-432L799,-424L790,-424L781,-414L771,-406L767,-389C767,-389,772,-383,767,-379C761,-375,757,-374,745,-369L716,-374L709,-395L695,-412L701,-420C701,-420,707,-410,710,-419C714,-428,721,-436,722,-442L721,-459L710,-459C710,-459,718,-469,710,-469L695,-493L688,-513L692,-536L698,-535C698,-535,703,-553,711,-550L745,-550L752,-536L759,-536L767,-539C767,-539,773,-545,777,-542L787,-527L800,-536C803,-533,808,-527,808,-527L820,-536C823,-532,824,-520,824,-520L834,-527z"
                }, {

                    "path": "M803,-432C803,-432,804,-418,797,-412L786,-393L779,-373L773,-362L776,-352L767,-344C769,-341,767,-334,767,-334C766,-333,757,-334,757,-334L757,-322L750,-314L750,-306L745,-290L734,-279L717,-279C717,-279,705,-288,705,-299L705,-319C705,-319,728,-315,719,-325L709,-355L724,-372C738,-370,748,-382,754,-382L766,-400L790,-424L803,-432"
                }, {

                    "path": "M0,-440L0,-912L267,-912L267,-905L267,-896L274,-890L274,-879L266,-866L257,-855L247,-845L246,-830L240,-822C240,-822,237,-815,240,-815L244,-815L250,-806L258,-806L255,-794L261,-794L253,-783L285,-740L285,-732L273,-732L266,-715L258,-715L251,-707L240,-707L240,-694L258,-676L265,-667L273,-669C273,-669,276,-665,277,-661C279,-656,260,-644,260,-644L263,-638L252,-629L246,-638L241,-629L250,-621L258,-621L267,-614L262,-609L269,-596L275,-596L285,-587L294,-587L294,-582L302,-580L309,-579L316,-581L316,-574L316,-562L327,-554L327,-544L327,-532L319,-531L321,-520L313,-520L303,-526L303,-517L298,-511L288,-511L283,-504L269,-504L273,-493L276,-485L276,-473L283,-464L282,-455L284,-448L282,-440L290,-440L298,-440L299,-433L289,-433C289,-433,289,-422,283,-421C277,-420,270,-415,270,-415L261,-415L253,-415L245,-415L238,-409L230,-405L218,-400C218,-400,222,-392,216,-391L210,-390L209,-376L203,-369L200,-352L192,-352L187,-363L175,-369C175,-369,166,-375,164,-375L151,-375L143,-385L137,-381L134,-369L124,-369L118,-381L111,-392L111,-405L102,-412L97,-425L85,-426L71,-427C71,-427,62,-433,57,-431C53,-430,46,-422,46,-422L35,-423L30,-429L18,-434C18,-434,0,-434,0,-440"
                }]
            },

                {
                    name: '± 1% variation from target',
                    color: '#7abae2',
                    borderColor: '#e5e5e5',
                    borderWidth: '2px',
                    dataLabels: {
                        enabled: true,
                        useHTML: true,
                        allowOverlap: true,
                        formatter: function () {
                            //return mapformatter(this.key, "green-circ.png");
                            return mapformatter(this.key, "check.png");
                        }
                    },

                    "data": green
                },

                {
                    "type": "map",
                    name: '±  > 1% - ≤ 2% variation from target',
                    color: '#7abae2',
                    borderColor: '#e5e5e5',
                    borderWidth: '2px',
                    dataLabels: {
                        enabled: true,
                        useHTML: true,
                        allowOverlap: true,
                        formatter: function () {
                            return mapformatter(this.key, "right-down.png");
                            //return mapformatter(this.key, "yellow-circ.png");
                        }
                    },

                    "data": yellow
                },

                {
                    "type": "map",
                    name: '> ± 2% variation from target',
                    color: '#2372a3',
                    borderColor: '#e5e5e5',
                    borderWidth: '2px',
                    dataLabels: {
                        enabled: true,
                        useHTML: true,
                        formatter: function () {
                            return mapformatter(this.key, "crush.png");
                            //return mapformatter(this.key, "red-circ.png");
                        }
                    },
                    "data": red
                }
            ]
        }, resizeChart);
    };

    function sydney(data) {
        var lhd = [];
        var percentAllStreams = helper.Qlik2Lhd(data);

        for (var i = 0; i < percentAllStreams.length; i++) {
            lhd = percentAllStreams[i]["LHD"];
            if (lhd === "NBM") {
                var nbmValue = percentAllStreams[i]["Value"];
                var nbmName = percentAllStreams[i]["LHD"];
            }
            if (lhd === "CC") {
                var ccValue = percentAllStreams[i]["Value"];
                var ccName = percentAllStreams[i]["LHD"];
            }
            if (lhd === "WS") {
                var wsValue = percentAllStreams[i]["Value"];
                var wsName = percentAllStreams[i]["LHD"];
            }
            if (lhd === "NS") {
                var nsValue = percentAllStreams[i]["Value"];
                var nsName = percentAllStreams[i]["LHD"];
            }
            if (lhd === "SYD") {
                var sValue = percentAllStreams[i]["Value"];
                var sName = percentAllStreams[i]["LHD"];
            }
            if (lhd === "SES") {
                var sesValue = percentAllStreams[i]["Value"];
                var sesName = percentAllStreams[i]["LHD"];
            }
            if (lhd === "SWS") {
                var swsValue = percentAllStreams[i]["Value"];
                var swsName = percentAllStreams[i]["LHD"];
            }
            if (lhd === "IS") {
                var isValue = percentAllStreams[i]["Value"];
                var isName = percentAllStreams[i]["LHD"];

            }



        }

        var nbm = {
            "name": nbmName,
            'value': nbmValue,
            "path": "M131,-631C122,-643,124,-656,127,-668C131,-681,130,-684,117,-686C112,-687,107,-687,103,-689C94,-693,86,-698,82,-683C80,-679,76,-682,73,-684C68,-687,62,-690,64,-697C69,-719,63,-737,46,-752C40,-757,40,-766,39,-773C36,-783,36,-794,33,-804C32,-809,34,-817,24,-817C24,-817,23,-819,23,-820C29,-831,19,-841,21,-853C24,-864,19,-874,10,-880C3,-885,0,-892,1,-900C3,-912,9,-916,20,-912C22,-911,25,-910,27,-910C34,-910,41,-899,46,-907C52,-916,57,-928,53,-940C48,-958,48,-958,63,-970C65,-971,68,-972,68,-974C72,-983,76,-987,87,-991C104,-997,118,-996,133,-991C145,-986,157,-981,169,-990C174,-993,175,-988,176,-985C180,-976,183,-966,183,-956C182,-949,185,-944,193,-943C203,-940,213,-937,223,-938C225,-939,228,-939,229,-938C243,-926,260,-930,276,-929C279,-929,283,-928,284,-932C286,-936,283,-937,281,-940C279,-942,275,-945,278,-948C280,-952,284,-950,287,-949C291,-947,294,-948,298,-949C314,-953,326,-944,327,-927C327,-922,328,-916,332,-915C347,-911,361,-904,377,-909C380,-910,383,-912,384,-915C388,-921,392,-927,401,-924C409,-921,410,-913,410,-906C410,-904,410,-901,409,-899C405,-898,405,-895,405,-891C405,-884,405,-877,405,-869C405,-852,403,-836,386,-826C384,-824,382,-821,382,-819C381,-806,373,-802,362,-801C359,-801,357,-799,354,-798C342,-792,341,-789,347,-777C357,-754,353,-733,336,-719C327,-712,315,-707,305,-703C296,-699,298,-698,303,-693C316,-680,322,-663,320,-644C319,-634,315,-630,306,-632C289,-636,272,-629,256,-635C254,-636,251,-634,249,-633C240,-630,231,-629,222,-629C214,-628,206,-628,198,-633C191,-637,189,-645,189,-654C179,-645,170,-640,158,-640C155,-640,153,-639,151,-637C145,-631,138,-630,131,-631z"
        }

        var ish = {
            "name": isName,
            'value': isValue,
            "path": "M387,-528C386,-518,380,-513,371,-512C368,-511,364,-511,365,-508C367,-498,359,-495,355,-489C353,-485,349,-480,349,-476C348,-457,338,-441,341,-422C342,-417,341,-412,338,-408C331,-420,324,-420,317,-409C316,-408,316,-408,316,-408C314,-402,308,-396,313,-390C317,-384,323,-391,327,-392C339,-376,326,-360,326,-344C326,-336,324,-329,322,-321C320,-311,315,-301,302,-300C297,-300,294,-297,295,-291C295,-281,294,-270,299,-260C302,-254,303,-248,304,-241C305,-232,307,-225,318,-223C325,-222,323,-216,322,-212C321,-207,321,-201,314,-200C310,-199,307,-201,307,-205C306,-207,307,-209,307,-211C307,-219,306,-227,299,-231C292,-234,287,-228,281,-225C274,-220,274,-213,275,-206C276,-200,282,-192,277,-189C272,-185,264,-189,257,-191C255,-192,253,-194,250,-195C247,-196,243,-196,241,-193C239,-189,240,-186,242,-183C252,-169,252,-168,239,-156C238,-156,237,-155,237,-154C231,-142,223,-132,214,-122C211,-119,211,-114,213,-110C217,-99,212,-91,205,-84C193,-72,187,-59,189,-41C191,-33,186,-26,181,-21C175,-16,170,-11,168,-3C166,2,162,3,157,1C153,0,148,-2,149,-9C151,-27,141,-34,125,-26C111,-20,97,-17,83,-25C72,-31,68,-39,71,-52C73,-61,77,-70,81,-78C84,-86,87,-94,86,-103C85,-112,89,-117,97,-119C115,-124,124,-138,132,-153C134,-158,136,-164,131,-167C120,-174,114,-185,108,-196C104,-201,99,-206,95,-212C91,-216,92,-221,93,-227C94,-239,95,-251,97,-263C97,-266,92,-270,90,-273C85,-282,81,-292,87,-302C90,-309,94,-310,100,-305C120,-287,121,-287,145,-302C154,-308,165,-312,176,-317C179,-317,183,-319,184,-322C193,-335,207,-338,220,-344C236,-351,236,-351,243,-335C247,-351,259,-357,271,-364C277,-368,280,-373,273,-378C264,-386,266,-394,269,-404C278,-427,291,-448,298,-472C299,-475,300,-477,303,-477C314,-478,319,-492,331,-490C333,-490,336,-494,335,-496C333,-510,343,-519,346,-531C349,-541,356,-541,363,-538C370,-536,376,-532,382,-528C384,-528,385,-528,387,-528L387,-528z"
        }

        var cc = {
            "name": ccName,
            'value': ccValue,
            "path": "M409,-899C410,-901,410,-904,410,-906C413,-909,414,-912,420,-909C435,-903,441,-906,449,-921C458,-937,464,-938,476,-923C482,-917,485,-909,487,-901C490,-891,494,-882,505,-881C515,-880,526,-881,531,-893C531,-894,533,-896,534,-896C544,-890,542,-900,543,-904C547,-904,548,-900,550,-898C560,-889,561,-883,548,-877C539,-872,539,-865,540,-858C541,-853,541,-848,533,-846C536,-853,535,-858,529,-863C526,-851,514,-845,510,-833C508,-826,497,-827,491,-825C486,-827,482,-830,476,-831C472,-831,467,-832,464,-827C463,-823,464,-821,466,-819C471,-816,475,-814,480,-818C482,-821,484,-824,488,-822C493,-818,498,-819,503,-823C506,-825,509,-827,512,-823C514,-821,515,-818,513,-814C506,-801,504,-787,498,-773C494,-763,485,-760,476,-766C473,-768,471,-767,468,-765C467,-763,465,-760,464,-758C456,-750,449,-751,442,-760L442,-760C443,-762,442,-764,440,-765C441,-771,439,-777,434,-778C423,-781,417,-794,406,-797C401,-798,397,-801,393,-804C383,-812,383,-818,393,-825C401,-832,406,-841,408,-852C410,-868,409,-884,409,-899z"
        }

        var ses = {
            "name": sesName,
            'value': sesValue,
            color: '#458fc8',
            "path": "M375,-597C375,-602,381,-600,382,-604C388,-602,393,-604,395,-609C398,-620,403,-615,408,-611C410,-610,412,-609,414,-608L414,-608C415,-607,415,-607,416,-606C418,-601,413,-597,412,-593C411,-587,405,-580,417,-578C419,-578,419,-576,419,-575C419,-554,407,-537,387,-528C387,-528,387,-528,387,-528C387,-530,386,-530,385,-530C377,-537,369,-542,360,-544C353,-545,352,-549,352,-554C352,-565,358,-573,361,-583C361,-583,361,-583,361,-583C364,-584,366,-585,364,-589C365,-590,366,-591,367,-592C372,-590,374,-593,375,-597z"
        }



        var areaWithoutName = [{
            // "name": '4',
            dataLabels: {
                enabled: false
            },
            "path": "M440,-638C444,-643,459,-646,466,-643C472,-640,469,-635,468,-631C467,-629,467,-627,464,-628C454,-629,449,-625,449,-614C448,-610,449,-606,448,-602C447,-597,444,-594,439,-599C433,-604,427,-607,419,-606C418,-608,416,-609,414,-608L414,-608C415,-611,412,-615,419,-615C424,-616,430,-618,436,-620C446,-624,447,-628,440,-638z"
        },

            {
                // "name": '5',
                // 'value': '',
                dataLabels: {
                    enabled: false
                },
                "path": "M422,-579C423,-583,427,-583,429,-584C432,-585,434,-589,438,-587C440,-586,439,-584,439,-582C437,-579,433,-578,430,-579C428,-579,425,-579,422,-579z"
            },

            {
                // "name": '6',
                // 'value': '',
                dataLabels: {
                    enabled: false
                },
                "path": "M405,-643C403,-644,401,-644,400,-647C402,-648,404,-647,405,-646C405,-645,405,-644,405,-643z"
            },
            {
                // "name": '7',
                // 'value': '',
                dataLabels: {
                    enabled: false
                },
                "path": "M414,-608C416,-609,418,-608,419,-606C418,-606,417,-606,416,-606C415,-607,415,-607,414,-608z"
            },
            // {
            //     // "name": '16',
            //     // 'value': '',
            //     "path": "M375,-597C374,-593,372,-590,367,-592C369,-595,371,-597,375,-597z"
            // },

            {
                // "name": '9',
                // 'value': '',
                dataLabels: {
                    enabled: false
                },
                "path": "M364,-589C366,-585,364,-584,361,-583C359,-586,362,-587,364,-589z"
            },
            {
                // "name": '10',
                // 'value': '',
                dataLabels: {
                    enabled: false
                },
                "path": "M382,-528C383,-529,384,-530,385,-530C386,-530,387,-530,387,-528C385,-528,384,-528,382,-528z"
            },

            {
                // "name": '11',
                // 'value': '',
                dataLabels: {
                    enabled: false
                },
                "path": "M439,-761C439,-763,439,-764,440,-765C442,-764,443,-762,442,-760C440,-759,440,-760,439,-761z"
            },
            {
                // "name": '12',
                // 'value': '',
                dataLabels: {
                    enabled: false
                },
                "path": "M330,-395L330,-396,331,-396"
            }];

        var sws = {
            "name": swsName,
            'value': swsValue,
            "path": "M175,-321C161,-328,146,-325,132,-319C130,-318,127,-318,126,-322C124,-330,117,-333,111,-337C102,-344,97,-351,99,-364C101,-376,104,-391,87,-399C97,-403,100,-409,93,-418C90,-422,94,-427,98,-430C104,-435,107,-441,107,-448C106,-462,100,-467,87,-463C79,-461,74,-462,69,-468C64,-474,64,-480,66,-487C68,-493,72,-495,79,-493C86,-490,89,-493,89,-501C90,-515,95,-530,79,-542C91,-547,99,-543,107,-535C101,-561,119,-576,133,-591C135,-593,137,-595,139,-597C146,-606,144,-611,133,-612C126,-613,124,-616,123,-622C123,-625,119,-630,127,-631C131,-626,138,-624,143,-627C154,-636,168,-635,179,-641C183,-643,185,-644,187,-640C193,-628,203,-625,215,-624C235,-622,254,-635,274,-627C274,-627,275,-627,275,-627C285,-631,295,-629,305,-628C321,-626,322,-631,325,-644C326,-649,321,-654,323,-658C326,-665,333,-655,337,-661C344,-657,352,-653,359,-649C362,-645,367,-645,371,-643C389,-635,389,-635,387,-617L387,-617C382,-617,382,-614,384,-611C388,-607,382,-606,382,-604C381,-600,375,-602,375,-597C371,-597,369,-595,367,-592C366,-591,365,-590,364,-589C362,-587,359,-586,361,-583L361,-583C352,-580,350,-571,350,-564C350,-544,339,-527,332,-509C329,-502,330,-489,316,-493C315,-493,314,-492,314,-491C312,-485,308,-482,302,-482C297,-482,295,-478,294,-473C292,-467,289,-461,287,-455C279,-437,271,-420,264,-402C261,-393,259,-384,267,-378C274,-372,272,-370,266,-366C258,-361,249,-356,243,-347C240,-357,235,-356,228,-353C209,-344,189,-338,175,-321z"
        }

        var s = {
            "name": sName,
            "value": sValue,
            dataLabels: {
                x: -10,
                y: -5
            },
            "path": "M387,-617C394,-620,391,-626,391,-630C392,-637,391,-645,400,-647C400,-647,400,-647,400,-647C401,-644,403,-644,405,-643C411,-641,418,-641,424,-642C429,-643,434,-643,437,-638C438,-634,445,-630,439,-626C429,-620,417,-616,406,-619C399,-620,396,-620,392,-615C388,-610,387,-613,387,-617L387,-617z"
        }

        var ns = {
            "name": nsName,
            'value': nsValue,
            "path": "M442,-760C443,-751,441,-744,431,-737C442,-737,448,-741,454,-744C459,-747,461,-745,464,-741C471,-733,469,-724,469,-715C469,-705,457,-707,455,-700C464,-698,463,-692,461,-685C459,-680,457,-675,458,-670C458,-669,458,-668,459,-667C450,-667,450,-657,445,-655C432,-648,420,-641,405,-646C404,-647,402,-648,400,-647L400,-647C401,-649,400,-650,399,-652C385,-666,376,-683,375,-703C374,-736,389,-768,388,-802C396,-791,419,-795,416,-774C430,-779,430,-779,437,-764C438,-763,438,-762,439,-761C440,-760,440,-759,442,-760L442,-760z"
        }

        var ws = {
            "name": wsName,
            'value': wsValue,
            color: '#458fc8',
            "path": "M337,-661C317,-665,319,-686,306,-696C312,-702,319,-706,326,-709C340,-714,351,-723,355,-737C358,-749,356,-762,352,-774C348,-789,351,-795,366,-798C382,-800,384,-798,382,-780C380,-765,377,-750,374,-735C368,-712,368,-689,382,-668C386,-663,386,-656,391,-651C394,-648,391,-645,389,-643C388,-639,385,-641,383,-642C375,-645,368,-651,359,-649C352,-653,344,-657,337,-661z"
        }

        var green = [];
        var yellow = [];
        var red = [];

        var dataColor = [nbm, ish, cc, ses, sws, s, ns, ws];
        for (var i = 0; i < dataColor.length; i++) {
            if (dataColor[i]["value"] > 2 || dataColor[i]["value"] < -2) {
                red.push(dataColor[i]);
                dataColor[i]["value"] = dataColor[i]["value"] + "%";
            }
            if (-2 <= dataColor[i]["value"] && dataColor[i]["value"] <= -1 || 1 <= dataColor[i]["value"] && dataColor[i]["value"] <= 2) {
                yellow.push(dataColor[i]);
                dataColor[i]["value"] = dataColor[i]["value"] + "%";
            }
            if (dataColor[i]["value"] < 1 && dataColor[i]["value"] > -1) {
                green.push(dataColor[i]);
                dataColor[i]["value"] = dataColor[i]["value"] + "%";
            }
        }

        for (var i = 0; i < areaWithoutName.length; i++) {
            yellow.push(areaWithoutName[i]);
        }

        var chartspacing_bottom = helper.isPortrait() ? 20 : 0;
        var chartspacing_top = helper.isPortrait() ? 0 : 0;

        $('#container5').highcharts('Map', {
            chart: {
                backgroundColor: '#e5e5e5',
                spacingBottom: chartspacing_bottom,
                spacingTop: chartspacing_top,
                spacingLeft: 0,
                spacingRight: 0
            },

            title: {
                text: '',
            },
            legend: {
                enabled: false
            },
            tooltip: {
                enabled: true,
                hideDelay: 0,
                borderWidth: 0,
                borderRadius: 10,
                shadow: false,
                useHTML: true,
                backgroundColor: 'transparent',
                style: {
                    padding: 0
                },
                formatter: function () {
                    if (this.series.name == 'mapbg' || this.point.value === undefined) {
                        return false;
                    } else {
                        return '<span style="padding:10px; text-align:center; display:block; background:#34474f; border-radius:0px; color: #fff">' +
                            /*'<b>Series name: ' +*/
                            //this.series.name + '</b><br>' +
                            /*'Point name: ' +*/
                            this.point.name + '<br>' +
                            'All Streams: ' + this.point.value +
                            '</span>';
                    }

                },
            },

            credits: {
                enabled: false
            },

            mapNavigation: {
                enabled: false,
                enableMouseWheelZoom: false
            },
            buttonOptions: {
                align: "right",
                enabled: true
            },
            series: [{
                "type": "map",
                name: 'mapbg',
                color: '#ccc',
                borderColor: '#fff',
                dataLabels: { enabled: false },
                "data": [{
                    "path": "M131,-631C122,-643,124,-656,127,-668C131,-681,130,-684,117,-686C112,-687,107,-687,103,-689C94,-693,86,-698,82,-683C80,-679,76,-682,73,-684C68,-687,62,-690,64,-697C69,-719,63,-737,46,-752C40,-757,40,-766,39,-773C36,-783,36,-794,33,-804C32,-809,34,-817,24,-817C24,-817,23,-819,23,-820C29,-831,19,-841,21,-853C24,-864,19,-874,10,-880C3,-885,0,-892,1,-900C3,-912,9,-916,20,-912C22,-911,25,-910,27,-910C34,-910,41,-899,46,-907C52,-916,57,-928,53,-940C48,-958,48,-958,63,-970C65,-971,68,-972,68,-974C72,-983,76,-987,87,-991C104,-997,118,-996,133,-991C145,-986,157,-981,169,-990C174,-993,175,-988,176,-985C180,-976,183,-966,183,-956C182,-949,185,-944,193,-943C203,-940,213,-937,223,-938C225,-939,228,-939,229,-938C243,-926,260,-930,276,-929C279,-929,283,-928,284,-932C286,-936,283,-937,281,-940C279,-942,275,-945,278,-948C280,-952,284,-950,287,-949C291,-947,294,-948,298,-949C314,-953,326,-944,327,-927C327,-922,328,-916,332,-915C347,-911,361,-904,377,-909C380,-910,383,-912,384,-915C388,-921,392,-927,401,-924C409,-921,410,-913,410,-906C410,-904,410,-901,409,-899C405,-898,405,-895,405,-891C405,-884,405,-877,405,-869C405,-852,403,-836,386,-826C384,-824,382,-821,382,-819C381,-806,373,-802,362,-801C359,-801,357,-799,354,-798C342,-792,341,-789,347,-777C357,-754,353,-733,336,-719C327,-712,315,-707,305,-703C296,-699,298,-698,303,-693C316,-680,322,-663,320,-644C319,-634,315,-630,306,-632C289,-636,272,-629,256,-635C254,-636,251,-634,249,-633C240,-630,231,-629,222,-629C214,-628,206,-628,198,-633C191,-637,189,-645,189,-654C179,-645,170,-640,158,-640C155,-640,153,-639,151,-637C145,-631,138,-630,131,-631z"
                }, {
                    "path": "M387,-528C386,-518,380,-513,371,-512C368,-511,364,-511,365,-508C367,-498,359,-495,355,-489C353,-485,349,-480,349,-476C348,-457,338,-441,341,-422C342,-417,341,-412,338,-408C331,-420,324,-420,317,-409C316,-408,316,-408,316,-408C314,-402,308,-396,313,-390C317,-384,323,-391,327,-392C339,-376,326,-360,326,-344C326,-336,324,-329,322,-321C320,-311,315,-301,302,-300C297,-300,294,-297,295,-291C295,-281,294,-270,299,-260C302,-254,303,-248,304,-241C305,-232,307,-225,318,-223C325,-222,323,-216,322,-212C321,-207,321,-201,314,-200C310,-199,307,-201,307,-205C306,-207,307,-209,307,-211C307,-219,306,-227,299,-231C292,-234,287,-228,281,-225C274,-220,274,-213,275,-206C276,-200,282,-192,277,-189C272,-185,264,-189,257,-191C255,-192,253,-194,250,-195C247,-196,243,-196,241,-193C239,-189,240,-186,242,-183C252,-169,252,-168,239,-156C238,-156,237,-155,237,-154C231,-142,223,-132,214,-122C211,-119,211,-114,213,-110C217,-99,212,-91,205,-84C193,-72,187,-59,189,-41C191,-33,186,-26,181,-21C175,-16,170,-11,168,-3C166,2,162,3,157,1C153,0,148,-2,149,-9C151,-27,141,-34,125,-26C111,-20,97,-17,83,-25C72,-31,68,-39,71,-52C73,-61,77,-70,81,-78C84,-86,87,-94,86,-103C85,-112,89,-117,97,-119C115,-124,124,-138,132,-153C134,-158,136,-164,131,-167C120,-174,114,-185,108,-196C104,-201,99,-206,95,-212C91,-216,92,-221,93,-227C94,-239,95,-251,97,-263C97,-266,92,-270,90,-273C85,-282,81,-292,87,-302C90,-309,94,-310,100,-305C120,-287,121,-287,145,-302C154,-308,165,-312,176,-317C179,-317,183,-319,184,-322C193,-335,207,-338,220,-344C236,-351,236,-351,243,-335C247,-351,259,-357,271,-364C277,-368,280,-373,273,-378C264,-386,266,-394,269,-404C278,-427,291,-448,298,-472C299,-475,300,-477,303,-477C314,-478,319,-492,331,-490C333,-490,336,-494,335,-496C333,-510,343,-519,346,-531C349,-541,356,-541,363,-538C370,-536,376,-532,382,-528C384,-528,385,-528,387,-528L387,-528z"
                }, {
                    "path": "M442,-760C443,-751,441,-744,431,-737C442,-737,448,-741,454,-744C459,-747,461,-745,464,-741C471,-733,469,-724,469,-715C469,-705,457,-707,455,-700C464,-698,463,-692,461,-685C459,-680,457,-675,458,-670C458,-669,458,-668,459,-667C450,-667,450,-657,445,-655C432,-648,420,-641,405,-646C404,-647,402,-648,400,-647L400,-647C401,-649,400,-650,399,-652C385,-666,376,-683,375,-703C374,-736,389,-768,388,-802C396,-791,419,-795,416,-774C430,-779,430,-779,437,-764C438,-763,438,-762,439,-761C440,-760,440,-759,442,-760L442,-760z"
                },

                    {
                        "path": "M440,-638C444,-643,459,-646,466,-643C472,-640,469,-635,468,-631C467,-629,467,-627,464,-628C454,-629,449,-625,449,-614C448,-610,449,-606,448,-602C447,-597,444,-594,439,-599C433,-604,427,-607,419,-606C418,-608,416,-609,414,-608L414,-608C415,-611,412,-615,419,-615C424,-616,430,-618,436,-620C446,-624,447,-628,440,-638z"
                    },

                    {
                        "path": "M422,-579C423,-583,427,-583,429,-584C432,-585,434,-589,438,-587C440,-586,439,-584,439,-582C437,-579,433,-578,430,-579C428,-579,425,-579,422,-579z"
                    },

                    {
                        "path": "M405,-643C403,-644,401,-644,400,-647C402,-648,404,-647,405,-646C405,-645,405,-644,405,-643z"
                    }, {
                        "path": "M414,-608C416,-609,418,-608,419,-606C418,-606,417,-606,416,-606C415,-607,415,-607,414,-608z"
                    }, {
                        "path": "M375,-597C374,-593,372,-590,367,-592C369,-595,371,-597,375,-597z"
                    },

                    {
                        "path": "M364,-589C366,-585,364,-584,361,-583C359,-586,362,-587,364,-589z"
                    }, {
                        "path": "M382,-528C383,-529,384,-530,385,-530C386,-530,387,-530,387,-528C385,-528,384,-528,382,-528z"
                    },

                    {
                        "path": "M439,-761C439,-763,439,-764,440,-765C442,-764,443,-762,442,-760C440,-759,440,-760,439,-761z"
                    }, {
                        "path": "M330,-395L330,-396,331,-396"
                    }, {
                        "path": "M337,-661C317,-665,319,-686,306,-696C312,-702,319,-706,326,-709C340,-714,351,-723,355,-737C358,-749,356,-762,352,-774C348,-789,351,-795,366,-798C382,-800,384,-798,382,-780C380,-765,377,-750,374,-735C368,-712,368,-689,382,-668C386,-663,386,-656,391,-651C394,-648,391,-645,389,-643C388,-639,385,-641,383,-642C375,-645,368,-651,359,-649C352,-653,344,-657,337,-661z"
                    }, {
                        "path": "M409,-899C410,-901,410,-904,410,-906C413,-909,414,-912,420,-909C435,-903,441,-906,449,-921C458,-937,464,-938,476,-923C482,-917,485,-909,487,-901C490,-891,494,-882,505,-881C515,-880,526,-881,531,-893C531,-894,533,-896,534,-896C544,-890,542,-900,543,-904C547,-904,548,-900,550,-898C560,-889,561,-883,548,-877C539,-872,539,-865,540,-858C541,-853,541,-848,533,-846C536,-853,535,-858,529,-863C526,-851,514,-845,510,-833C508,-826,497,-827,491,-825C486,-827,482,-830,476,-831C472,-831,467,-832,464,-827C463,-823,464,-821,466,-819C471,-816,475,-814,480,-818C482,-821,484,-824,488,-822C493,-818,498,-819,503,-823C506,-825,509,-827,512,-823C514,-821,515,-818,513,-814C506,-801,504,-787,498,-773C494,-763,485,-760,476,-766C473,-768,471,-767,468,-765C467,-763,465,-760,464,-758C456,-750,449,-751,442,-760L442,-760C443,-762,442,-764,440,-765C441,-771,439,-777,434,-778C423,-781,417,-794,406,-797C401,-798,397,-801,393,-804C383,-812,383,-818,393,-825C401,-832,406,-841,408,-852C410,-868,409,-884,409,-899z"
                    }, {
                        "path": "M375,-597C375,-602,381,-600,382,-604C388,-602,393,-604,395,-609C398,-620,403,-615,408,-611C410,-610,412,-609,414,-608L414,-608C415,-607,415,-607,416,-606C418,-601,413,-597,412,-593C411,-587,405,-580,417,-578C419,-578,419,-576,419,-575C419,-554,407,-537,387,-528C387,-528,387,-528,387,-528C387,-530,386,-530,385,-530C377,-537,369,-542,360,-544C353,-545,352,-549,352,-554C352,-565,358,-573,361,-583C361,-583,361,-583,361,-583C364,-584,366,-585,364,-589C365,-590,366,-591,367,-592C372,-590,374,-593,375,-597z"
                    }, {
                        "path": "M175,-321C161,-328,146,-325,132,-319C130,-318,127,-318,126,-322C124,-330,117,-333,111,-337C102,-344,97,-351,99,-364C101,-376,104,-391,87,-399C97,-403,100,-409,93,-418C90,-422,94,-427,98,-430C104,-435,107,-441,107,-448C106,-462,100,-467,87,-463C79,-461,74,-462,69,-468C64,-474,64,-480,66,-487C68,-493,72,-495,79,-493C86,-490,89,-493,89,-501C90,-515,95,-530,79,-542C91,-547,99,-543,107,-535C101,-561,119,-576,133,-591C135,-593,137,-595,139,-597C146,-606,144,-611,133,-612C126,-613,124,-616,123,-622C123,-625,119,-630,127,-631C131,-626,138,-624,143,-627C154,-636,168,-635,179,-641C183,-643,185,-644,187,-640C193,-628,203,-625,215,-624C235,-622,254,-635,274,-627C274,-627,275,-627,275,-627C285,-631,295,-629,305,-628C321,-626,322,-631,325,-644C326,-649,321,-654,323,-658C326,-665,333,-655,337,-661C344,-657,352,-653,359,-649C362,-645,367,-645,371,-643C389,-635,389,-635,387,-617L387,-617C382,-617,382,-614,384,-611C388,-607,382,-606,382,-604C381,-600,375,-602,375,-597C371,-597,369,-595,367,-592C366,-591,365,-590,364,-589C362,-587,359,-586,361,-583L361,-583C352,-580,350,-571,350,-564C350,-544,339,-527,332,-509C329,-502,330,-489,316,-493C315,-493,314,-492,314,-491C312,-485,308,-482,302,-482C297,-482,295,-478,294,-473C292,-467,289,-461,287,-455C279,-437,271,-420,264,-402C261,-393,259,-384,267,-378C274,-372,272,-370,266,-366C258,-361,249,-356,243,-347C240,-357,235,-356,228,-353C209,-344,189,-338,175,-321z"
                    }, {
                        "path": "M387,-617C394,-620,391,-626,391,-630C392,-637,391,-645,400,-647C400,-647,400,-647,400,-647C401,-644,403,-644,405,-643C411,-641,418,-641,424,-642C429,-643,434,-643,437,-638C438,-634,445,-630,439,-626C429,-620,417,-616,406,-619C399,-620,396,-620,392,-615C388,-610,387,-613,387,-617L387,-617z"
                    }
                ]
            }, {
                name: '± 1% variation from target',
                color: '#7abae2',
                dataLabels: {
                    enabled: true,
                    useHTML: true,
                    allowOverlap: true,
                    formatter: function () {
                        return mapformatter(this.key, "check.png");
                        //return mapformatter(this.key, "green-circ.png");
                    }
                },

                "data": green
            }, {
                "type": "map",
                name: '±  > 1% - ≤ 2% variation from target',
                color: '#7abae2',
                dataLabels: {
                    enabled: true,
                    useHTML: true,
                    allowOverlap: true,
                    formatter: function () {
                        return mapformatter(this.key, "right-down.png");
                        //return mapformatter(this.key, "yellow-circ.png");
                    }
                },

                "data": yellow
            }, {
                "type": "map",
                name: '> ± 2% variation from target',
                color: '#2372a3',
                dataLabels: {
                    enabled: true,
                    useHTML: true,
                    allowOverlap: true,
                    formatter: function () {
                        return mapformatter(this.key, "crush.png");
                        //return mapformatter(this.key, "red-circ.png");
                    }
                },
                "data": red
            }]
        }, resizeChart);
    };
});

